extends layout

block active
	- active = 'Home';
append scripts
	script(src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js")
	script.
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyAG6MUBQT3j6WUo_L4Lrctibo279CnNGbM",
			authDomain: "firstmentormatch-86b8f.firebaseapp.com",
			databaseURL: "https://firstmentormatch-86b8f.firebaseio.com",
			projectId: "firstmentormatch-86b8f",
			storageBucket: "firstmentormatch-86b8f.appspot.com",
			messagingSenderId: "45560575799"
		};
		firebase.initializeApp(config);
		const txtEmail = document.getElementById('txtEmail');
		const txtPassword = document.getElementById('txtPassword');
		const btnLogin = document.getElementById('btnLogin');
		const btnSignUp = document.getElementById('btnSignUp');
		const btnLogout = document.getElementById('btnLogout');

		btnLogin.addEventListener('click', e => {
			const email = txtEmail.value;
			const pass = txtPassword.value;
			const auth = firebase.auth();
			const promise = auth.signInWithEmailAndPassword(email,pass);
			promise.catch(e => console.log(e.message));
		});
		btnSignUp.addEventListener('click', e => {
			const email = txtEmail.value;
			const pass = txtPassword.value;
			const auth = firebase.auth();
			const promise = auth.createUserWithEmailAndPassword(email,pass);
			promise.catch(e => console.log(e.message));
		});

		firebase.auth().onAuthStateChanged(firebaseUser => {
			console.log("authStateChanged");
			if (firebaseUser) {
				console.log(firebaseUser);
				btnLogout.classList.remove('hide');
			} else {
				console.log('not logged in');
				btnLogout.classList.add('hide');
			}
		});

		btnLogout.addEventListener('click', e => {
			firebase.auth().signOut();
		});

append body
	.container
	.starter-template
		h1 Welcome.
		p.lead
			| This is a placeholder for the FIRST Mentor Match tool
		div
			input(id="txtEmail" type="email" placeholder="Email")
			input(id="txtPassword" type="password" placeholder="Password")
			br
			br
			button(id="btnLogin" class="btn btn-action").
				Log In
			button(id="btnSignUp" class="btn btn-secondary").
				Sign Up
			button(id="btnLogout" class="btn btn-action hide").
				Log Out
